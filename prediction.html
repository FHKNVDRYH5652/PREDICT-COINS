<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Coin Predictions — Live</title>
<link rel="icon" href="favicon.ico"/>
<script src="https://cdn.jsdelivr.net/npm/tsparticles@2.11.1/tsparticles.bundle.min.js"></script>
<style>
  :root{--panel:rgba(255,255,255,0.04);--neon:#00ff9d;--accent:#1dd3ff;--muted:#9fb0d6}
  *{box-sizing:border-box;font-family:Inter,system-ui,Arial}
  html,body{height:100%;margin:0}
  body{background:url('anime3.png') center/cover fixed;color:#eaf6ff;display:flex;align-items:center;justify-content:center;padding:28px}
  #tsparticles{position:fixed;inset:0;z-index:0}
  .wrap{position:relative;z-index:2;width:100%;max-width:900px}
  .card{background:var(--panel);backdrop-filter: blur(6px);padding:20px;border-radius:16px;box-shadow:0 12px 40px rgba(0,0,0,0.6);margin-bottom:16px;text-align:center}
  .big{font-size:20px;font-weight:800}
  .muted{color:var(--muted)}
  .btn{background:linear-gradient(90deg,var(--neon),var(--accent));color:#001;padding:10px 16px;border-radius:10px;border:none;cursor:pointer;font-weight:800}
</style>
</head>
<body>
<div id="tsparticles"></div>

<div class="wrap">
  <div class="card">
    <div class="big">Server Connected ✅</div>
    <div class="muted">Real-time coin prediction system</div>
  </div>

  <div class="card" id="periodCard">
    <div style="margin-bottom:8px"><strong>Period:</strong> <span id="periodNumber">loading...</span></div>
    <div><strong>Countdown:</strong> <span id="countdown">60s</span></div>
  </div>

  <div class="card" style="display:flex;gap:8px;justify-content:center">
    <button class="btn" onclick="location.href='index.html'">Back to Plans</button>
    <button class="btn" onclick="location.href='payment.html'">Payment</button>
    <button class="btn" onclick="location.href='admin.html'">Admin</button>
  </div>
</div>

<script>
  // particles
  tsParticles.load("tsparticles", {
    fpsLimit: 60,
    particles: {
      number: { value: 40 },
      color: { value: "#00ff9d" },
      links: { enable: true, distance: 140, color: "#00ff9d", opacity: 0.12, width: 1 },
      move: { enable: true, speed: 0.8 },
      size: { value: { min: 1, max: 4 } },
      opacity: { value: 0.7 }
    }
  });

  /* -----------------------------
     PERIOD CALCULATION (fixed)
     - period = basePeriod + minutesSinceBase
     - basePeriod     : BigInt (example taken from your message)
     - baseTimestamp  : Date for that basePeriod (include timezone +05:30 if you use IST)
     If your measured mapping differs, change the two variables below.
     ----------------------------- */

  // === EDIT THESE if you want to change mapping ===
  // I used the mapping you mentioned: at 2025-09-15 03:56 (IST) period was 20250915100010627
  const basePeriodStr = "20250915100010627";             // base period number (string)
  const baseTsISO = "2025-09-15T03:56:00+05:30";         // exact timestamp for that basePeriod (IST)
  // ==================================================

  const basePeriod = BigInt(basePeriodStr);
  const baseDate = new Date(baseTsISO);

  function computePeriodForNow(nowDate){
    // minutes difference (floor)
    const diffMs = nowDate.getTime() - baseDate.getTime();
    const diffMin = Math.floor(diffMs / 60000);
    const periodBig = basePeriod + BigInt(diffMin);
    return periodBig.toString();
  }

  function secondsToNextMinute(now){
    // seconds until the next minute (0..59 -> return 60-seconds)
    const s = now.getSeconds();
    return 60 - s;
  }

  function updateUI(){
    const now = new Date();
    try{
      document.getElementById('periodNumber').innerText = computePeriodForNow(now);
    }catch(e){
      // fallback if BigInt fails
      document.getElementById('periodNumber').innerText = basePeriodStr;
    }
    document.getElementById('countdown').innerText = secondsToNextMinute(now) + "s";
  }

  // Update every second so countdown is smooth.
  updateUI();
  setInterval(updateUI, 1000);

</script>
</body>
</html>
